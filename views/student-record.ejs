<html lang="en">

    <%- include('./partials/head.ejs') %>

<body>    
    <div class="student-record-parent">
        <%- include('./partials/navigation.ejs') %>

        <div class="student-record-form">
            <h1 class="student-record-title">Student Record Management</h1>

            <div class="student-record-subcontainer">
                <form class="student-record-subcontainer-side">

                    <h2>Search for Student</h2>

                    <div>
                        <label for="name">First Name</label>
                        <input type="text" name="name" class="name">
                    </div>

                    <div>
                        <label for="sy">SY</label>
                        <select name="sy" id="sy" value="opt2">
                            <option value="opt1">Option 1</option>
                            <option value="opt2">Option 2</option>
                            
                        </select>
                    </div>
                    
                    <div>
                        <label for="search">Search</label>
                        <select name="search" id="search">
                            <option value="opt1">Option 1</option>
                        </select>
                    </div>

                    <div>
                        <label for="value">Value</label>
                        <select name="value" id="value">
                            <option value="opt1">Option 1</option>
                        </select>
                    </div>

                    <button class="sub">Search</button>

                    <div class="search-results">

                    </div>
                </form>

                <form action="/student-record" method="POST" class="student-record-subcontainer-info">

                    <div class="student-record-subcontainer-body">
                        <div class="info-input">
                            <label for="department">Department</label>
                            <select name="department" id="department" required>
                                <option value="opt1">Option 1</option>
                            </select>
                        </div>

                        <div class="info-input">
                            <label for="lrn">LRN</label>
                            <input type="number" name="lrn" required>
                        </div>

                        <div class="info-input">
                            <label for="grade">Grade/Level</label>
                            <select name="grade" id="grade" required>
                                <option value="opt1">Option 1</option>
                            </select>
                        </div>

                        <div class="info-input">
                            <label for="section">Section</label>
                            <select name="section" id="section" required>
                                
                            </select>
                        </div>

                        <h2 style="flex: 100%; text-align: center">Personal Information</h2>

                        <div class="info-input">
                            <label for="lastname">Last Name</label>
                            <input type="text" name="lastname" required>
                        </div>

                        <div class="info-input">
                            <label for="dob">DOB</label>
                            <input type="date" name="dob" required>
                        </div>

                        <div class="info-input">
                            <label for="firstname">First Name</label>
                            <input type="text" name="firstname" required>
                        </div>

                        <div class="info-input">
                            <label for="birthplace">Place of Birth</label>
                            <input type="text" name="birthplace" required>
                        </div>

                        <div class="info-input">
                            <label for="middlename">Middle Name</label>
                            <input type="text" name="middlename" required>
                        </div>

                        <div class="info-input">
                            <label for="religion">Religion</label>
                            <input type="text" name="religion" required>
                        </div>

                        <div class="info-input" style="flex: 100%;">
                            <label for="address">Complete Address</label>
                            <input type="text" name="address" style="width: 80%" required>
                        </div>

                        <div class="info-input">
                            <label for="nationality">Nationality</label>
                            <input type="text" name="nationality" required>
                        </div>

                        <div class="radio-input">
                            <p>Gender:</p>
                            <input type="radio" id="male" name="gender" value="male" required>
                            <label for="male">Male</label>
                            <input type="radio" id="female" name="gender" value="female">
                            <label for="female">Female</label>
                        </div>

                        <div class="info-input">
                            <label for="mobile">Mobile Number</label>
                            <input type="number" name="mobile" min="0" required>
                        </div>

                        <div class="info-input">
                            <label for="email">Email Address</label>
                            <input type="email" name="email" required>
                        </div>

                        <button>Submit</button>

                    </div>

                    
                </form>

            </div>
        </div>
    </div>

    <script>

        const sections = '<%- JSON.stringify(sections) %>'
        const sectionsArray = JSON.parse(sections)
        
        const sectionSelect = document.getElementById('section')
        const searchResults = document.querySelector(".search-results")
        const results = '<%- JSON.stringify(record) %>'
        const resultsArray = JSON.parse(results)

        sectionsArray.forEach(section => {
            console.log(section.name)
            const opt = document.createElement("option")
            opt.text = section.name
            sectionSelect.add(opt)
            console.log(section)
        })
       
        resultsArray.forEach(result => {
            const a = document.createElement('a')
            const link = document.createTextNode(`${result.firstname} ${result.lastname}`)
            a.appendChild(link)
            a.href = `/student-record/${result._id}`
            searchResults.appendChild(a)
        })
       
    </script>
    
</body>
</html>